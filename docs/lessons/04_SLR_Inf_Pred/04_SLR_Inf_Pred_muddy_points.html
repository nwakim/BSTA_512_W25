<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Linear Models - Muddy Points</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-sm navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/bsta_512_hex.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Linear Models</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../schedule.html" rel="" target="">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../syllabus.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../instructors.html" rel="" target="">
 <span class="menu-text">Instructors</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../homework.html" rel="" target="">
 <span class="menu-text">Homework</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../project.html" rel="" target="">
 <span class="menu-text">Project</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#muddy-points-from-2025" id="toc-muddy-points-from-2025" class="nav-link active" data-scroll-target="#muddy-points-from-2025">Muddy Points from 2025</a>
  <ul class="collapse">
  <li><a href="#i-had-a-little-bit-of-trouble-visualizing-the-worthiness-of-how-reliable-the-data-is-on-a-graph" id="toc-i-had-a-little-bit-of-trouble-visualizing-the-worthiness-of-how-reliable-the-data-is-on-a-graph" class="nav-link" data-scroll-target="#i-had-a-little-bit-of-trouble-visualizing-the-worthiness-of-how-reliable-the-data-is-on-a-graph">1. I had a little bit of trouble visualizing the “worthiness” of how reliable the data is on a graph</a></li>
  <li><a href="#when-to-use-a-ci-vs-a-hypothesis-test-to-convey-information" id="toc-when-to-use-a-ci-vs-a-hypothesis-test-to-convey-information" class="nav-link" data-scroll-target="#when-to-use-a-ci-vs-a-hypothesis-test-to-convey-information">2. when to use a CI vs a hypothesis test to convey information</a></li>
  <li><a href="#getting-a-little-lost-between-all-the-terms-with-hats-without-hats-etc." id="toc-getting-a-little-lost-between-all-the-terms-with-hats-without-hats-etc." class="nav-link" data-scroll-target="#getting-a-little-lost-between-all-the-terms-with-hats-without-hats-etc.">3. Getting a little lost between all the terms (with hats, without hats etc.)</a></li>
  <li><a href="#the-equation-for-confidence-bands-around-the-linear-model-completely-lost-me" id="toc-the-equation-for-confidence-bands-around-the-linear-model-completely-lost-me" class="nav-link" data-scroll-target="#the-equation-for-confidence-bands-around-the-linear-model-completely-lost-me">4. The equation for confidence bands around the linear model completely lost me</a></li>
  <li><a href="#trying-to-keep-up-with-when-to-talk-about-the-population-model-and-when-to-talk-about-the-sample-estimate" id="toc-trying-to-keep-up-with-when-to-talk-about-the-population-model-and-when-to-talk-about-the-sample-estimate" class="nav-link" data-scroll-target="#trying-to-keep-up-with-when-to-talk-about-the-population-model-and-when-to-talk-about-the-sample-estimate">5. trying to keep up with when to talk about the population model and when to talk about the sample estimate</a></li>
  <li><a href="#the-difference-between-when-to-use-inference-and-prediction-as-the-words-seemed-to-used-interchangeably." id="toc-the-difference-between-when-to-use-inference-and-prediction-as-the-words-seemed-to-used-interchangeably." class="nav-link" data-scroll-target="#the-difference-between-when-to-use-inference-and-prediction-as-the-words-seemed-to-used-interchangeably.">6. The difference between when to use inference and prediction as the words seemed to used interchangeably.</a></li>
  <li><a href="#why-do-we-calculate-sse-with-the-square-of-the-residuals-why-not-just-the-sum-of-the-residuals-themselves" id="toc-why-do-we-calculate-sse-with-the-square-of-the-residuals-why-not-just-the-sum-of-the-residuals-themselves" class="nav-link" data-scroll-target="#why-do-we-calculate-sse-with-the-square-of-the-residuals-why-not-just-the-sum-of-the-residuals-themselves">7. Why do we calculate SSE with the square of the residuals? Why not just the sum of the residuals themselves?</a></li>
  <li><a href="#in-the-hypothesis-test-for-the-population-slope-why-was-the-degrees-of-freedom-calculated-as-df-n-2-instead-of-df-n-1" id="toc-in-the-hypothesis-test-for-the-population-slope-why-was-the-degrees-of-freedom-calculated-as-df-n-2-instead-of-df-n-1" class="nav-link" data-scroll-target="#in-the-hypothesis-test-for-the-population-slope-why-was-the-degrees-of-freedom-calculated-as-df-n-2-instead-of-df-n-1">8. In the hypothesis test for the population slope, why was the degrees of freedom calculated as <span class="math inline">\(df = n-2\)</span>, instead of <span class="math inline">\(df = n-1\)</span>?</a></li>
  <li><a href="#what-is-the-best-way-to-calculate-the-standard-error-for-b-hat-1-using-a-regression-table" id="toc-what-is-the-best-way-to-calculate-the-standard-error-for-b-hat-1-using-a-regression-table" class="nav-link" data-scroll-target="#what-is-the-best-way-to-calculate-the-standard-error-for-b-hat-1-using-a-regression-table">9. What is the best way to calculate the standard error for B HAT 1, using a regression table?</a></li>
  </ul></li>
  <li><a href="#muddy-points-from-2024" id="toc-muddy-points-from-2024" class="nav-link" data-scroll-target="#muddy-points-from-2024">Muddy Points from 2024</a>
  <ul class="collapse">
  <li><a href="#all-of-the-different-manifestations-of-t" id="toc-all-of-the-different-manifestations-of-t" class="nav-link" data-scroll-target="#all-of-the-different-manifestations-of-t">1. “all of the different manifestations of t”</a></li>
  <li><a href="#whats-the-difference-between-sd-and-variance" id="toc-whats-the-difference-between-sd-and-variance" class="nav-link" data-scroll-target="#whats-the-difference-between-sd-and-variance">2. What’s the difference between SD and variance?</a></li>
  <li><a href="#why-is-it-important-to-test-if-beta_1-is-equal-to-zero-is-beta_10-the-same-as-the-x-and-y-variables-having-no-correlation" id="toc-why-is-it-important-to-test-if-beta_1-is-equal-to-zero-is-beta_10-the-same-as-the-x-and-y-variables-having-no-correlation" class="nav-link" data-scroll-target="#why-is-it-important-to-test-if-beta_1-is-equal-to-zero-is-beta_10-the-same-as-the-x-and-y-variables-having-no-correlation">3. Why is it important to test if <span class="math inline">\(\beta_1\)</span> is equal to zero? Is <span class="math inline">\(\beta_1=0\)</span> the same as the x and y variables having no correlation?</a></li>
  <li><a href="#sse-and-sigma" id="toc-sse-and-sigma" class="nav-link" data-scroll-target="#sse-and-sigma">4. SSE and sigma</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Muddy Points</h1>
<p class="subtitle lead">Lesson</p>
</div>



<div class="quarto-title-meta">

    
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">January 21, 2025</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="muddy-points-from-2025" class="level2">
<h2 class="anchored" data-anchor-id="muddy-points-from-2025">Muddy Points from 2025</h2>
<section id="i-had-a-little-bit-of-trouble-visualizing-the-worthiness-of-how-reliable-the-data-is-on-a-graph" class="level3">
<h3 class="anchored" data-anchor-id="i-had-a-little-bit-of-trouble-visualizing-the-worthiness-of-how-reliable-the-data-is-on-a-graph">1. I had a little bit of trouble visualizing the “worthiness” of how reliable the data is on a graph</h3>
<p>Exactly. We can get an idea of the “trustworthiness” from a graph, but we can never be certain. That’s why we gotta use the math! The math will exactly quantify that “trustworthiness.”</p>
</section>
<section id="when-to-use-a-ci-vs-a-hypothesis-test-to-convey-information" class="level3">
<h3 class="anchored" data-anchor-id="when-to-use-a-ci-vs-a-hypothesis-test-to-convey-information">2. when to use a CI vs a hypothesis test to convey information</h3>
<p>Big question. For this class, when each is asked (heh). This is mostly so we get practice doing both and can do either in a quicker, more informal way.</p>
<p>For real life, people will report the p-value of a hypothesis test as they make a more meaningful statement about the coefficient estimate. No one really writes “We rejected the null hypothesis that …” However, they DO write “We found significant association with number of visits to the doctor (p-value = 0.008).” And even more likely, they are writing “We found that for an increase of one doctor visit per year, there was a 0.5 decrease in the expected number of 911 calls (95%CI: 0.2, 0.8). All that to say that people typically use CIs when doing a presentation or written report. When chatting with colleagues, you may informally discuss the hypothesis test.</p>
</section>
<section id="getting-a-little-lost-between-all-the-terms-with-hats-without-hats-etc." class="level3">
<h3 class="anchored" data-anchor-id="getting-a-little-lost-between-all-the-terms-with-hats-without-hats-etc.">3. Getting a little lost between all the terms (with hats, without hats etc.)</h3>
<p>It’s hard! My main advice is to keep practicing! Hats mean we are referring to the result of our estimate. We can replace any time we write “<span class="math inline">\(\hat{\beta_1}\)</span>” with the actual value we found in the regression table. For <span class="math inline">\(\beta_1\)</span>, we cannot replace it with an actual value. We can hypothesize what that value is, but we can never replace <span class="math inline">\(\beta_1\)</span> with a 100% certain value.</p>
</section>
<section id="the-equation-for-confidence-bands-around-the-linear-model-completely-lost-me" class="level3">
<h3 class="anchored" data-anchor-id="the-equation-for-confidence-bands-around-the-linear-model-completely-lost-me">4. The equation for confidence bands around the linear model completely lost me</h3>
</section>
<section id="trying-to-keep-up-with-when-to-talk-about-the-population-model-and-when-to-talk-about-the-sample-estimate" class="level3">
<h3 class="anchored" data-anchor-id="trying-to-keep-up-with-when-to-talk-about-the-population-model-and-when-to-talk-about-the-sample-estimate">5. trying to keep up with when to talk about the population model and when to talk about the sample estimate</h3>
<p>The population model is basically the plan for what we will do. It’s our guide, our blueprint. It does not actually exist in the world though! That’s becuase it is just a way to represent the true, underlying relationship that we cannot fully uncover.</p>
<p>That’s where the sample estimated model comes in. We can take the population model (our plan, guide, blueprint) and then implement it using data. Then we have the estimates! Those estimates are our closest bet to the population from our data.</p>
<p>You can think of it like the blueprint to a house. We have a plan. It’s our ideal structure for the home. If we have really good materials and evreyhting we need (think really good sample), then we can execute the blueprint pretty well. Our house will resemble the blueprint closely. It will never <strong>exactly</strong> be the blueprint, but it will get close. However, if our materials are lacking, and maybe someone forgot their measuring tape at home, then our house will not resemble our blueprint as nicely. There are many different houses that can come from the same blueprint.</p>
</section>
<section id="the-difference-between-when-to-use-inference-and-prediction-as-the-words-seemed-to-used-interchangeably." class="level3">
<h3 class="anchored" data-anchor-id="the-difference-between-when-to-use-inference-and-prediction-as-the-words-seemed-to-used-interchangeably.">6. The difference between when to use inference and prediction as the words seemed to used interchangeably.</h3>
<p>Prediction means we are using the model to predict the outcome. Inference means we are using the model to discuss the relationship between variables.</p>
<p>For the most part, models learned in this class will be most appropriate for inference. Prediction requires much more information and variables to make the predicted value more accurate.</p>
</section>
<section id="why-do-we-calculate-sse-with-the-square-of-the-residuals-why-not-just-the-sum-of-the-residuals-themselves" class="level3">
<h3 class="anchored" data-anchor-id="why-do-we-calculate-sse-with-the-square-of-the-residuals-why-not-just-the-sum-of-the-residuals-themselves">7. Why do we calculate SSE with the square of the residuals? Why not just the sum of the residuals themselves?</h3>
<p>Remember that the residuals can be negative or positive depending what side of the best-fit line they fall. If we sum them, no matter how far they are from the line, it is likely the sum will be close to zero. To make sure the negative and positive residuals do not cancel each other out, we square them!</p>
</section>
<section id="in-the-hypothesis-test-for-the-population-slope-why-was-the-degrees-of-freedom-calculated-as-df-n-2-instead-of-df-n-1" class="level3">
<h3 class="anchored" data-anchor-id="in-the-hypothesis-test-for-the-population-slope-why-was-the-degrees-of-freedom-calculated-as-df-n-2-instead-of-df-n-1">8. In the hypothesis test for the population slope, why was the degrees of freedom calculated as <span class="math inline">\(df = n-2\)</span>, instead of <span class="math inline">\(df = n-1\)</span>?</h3>
<p>This is because our <strong>model</strong> is what gives us the degrees of freedom. We are performing the hypothesis test on one coefficient, <span class="math inline">\(\beta_1\)</span>, but our model is estimating 2 coefficients! Thus we are restricted to <span class="math inline">\(n-2\)</span> degrees of freedom.</p>
</section>
<section id="what-is-the-best-way-to-calculate-the-standard-error-for-b-hat-1-using-a-regression-table" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-best-way-to-calculate-the-standard-error-for-b-hat-1-using-a-regression-table">9. What is the best way to calculate the standard error for B HAT 1, using a regression table?</h3>
<p>The best way is to look at the std. error column and then find the row that has the X-variable. The number in the table is the standard error for <span class="math inline">\(\beta_1\)</span>.</p>
</section>
</section>
<section id="muddy-points-from-2024" class="level2">
<h2 class="anchored" data-anchor-id="muddy-points-from-2024">Muddy Points from 2024</h2>
<section id="all-of-the-different-manifestations-of-t" class="level3">
<h3 class="anchored" data-anchor-id="all-of-the-different-manifestations-of-t">1. “all of the different manifestations of t”</h3>
<p>I love the way this person said it!</p>
<p>So I’ve sorted this out:</p>
<ul>
<li><p>We say <span class="math inline">\(T\)</span> follows a t-distribution</p>
<ul>
<li><span class="math inline">\(T\)</span> is the general name for the variable (like <span class="math inline">\(X\)</span> or <span class="math inline">\(Y\)</span>)</li>
</ul></li>
<li><p>We calculate a given <span class="math inline">\(t\)</span>-value and call that <span class="math inline">\(t\)</span></p>
<ul>
<li>We also call this the test statistic</li>
</ul></li>
<li><p>The critical value that corresponds to a specific confidence interval and <span class="math inline">\(\alpha\)</span> is labelled <span class="math inline">\(t^*\)</span></p></li>
</ul>
</section>
<section id="whats-the-difference-between-sd-and-variance" class="level3">
<h3 class="anchored" data-anchor-id="whats-the-difference-between-sd-and-variance">2. What’s the difference between SD and variance?</h3>
<p>SD (standard deviation) is the square root of the variance. That’s why I sometimes write <span class="math inline">\(\sigma\)</span> (standard deviation) or <span class="math inline">\(\sigma^2\)</span> (variance) when I’m talking about the distribution of residuals.</p>
<p><span class="math display">\[
\sigma = \sqrt{\sigma^2}
\]</span></p>
<p>Variance is usually easier to work with mathematically, but standard deviation is in the units that match a variable. For example, the variance of 10 height measurements are in square inches, but the standard deviation are in inches.</p>
</section>
<section id="why-is-it-important-to-test-if-beta_1-is-equal-to-zero-is-beta_10-the-same-as-the-x-and-y-variables-having-no-correlation" class="level3">
<h3 class="anchored" data-anchor-id="why-is-it-important-to-test-if-beta_1-is-equal-to-zero-is-beta_10-the-same-as-the-x-and-y-variables-having-no-correlation">3. Why is it important to test if <span class="math inline">\(\beta_1\)</span> is equal to zero? Is <span class="math inline">\(\beta_1=0\)</span> the same as the x and y variables having no correlation?</h3>
<p>Let’s answer the second question: Yes! It is the same in simple linear regression. When we get to multiple linear regression, and have several variables/coefficients in our model, testing <span class="math inline">\(\beta_1=0\)</span> won’t be the same as testing the correlation.</p>
<p>In simple linear regression, it is important to test <span class="math inline">\(\beta_1\)</span> mostly for pedagogical reasons. It’s just helpful to establish the process in a simpler setting.</p>
</section>
<section id="sse-and-sigma" class="level3">
<h3 class="anchored" data-anchor-id="sse-and-sigma">4. SSE and sigma</h3>
<p>We were looking at the relationship between SSE and <span class="math inline">\(\widehat\sigma^2\)</span>:</p>
<p><span class="math display">\[ \widehat{\sigma}^2 = \frac{1}{n-2}SSE \]</span></p>
<p>The sum of square errors is <span class="math inline">\(SSE = \sum_{i=1}^n (Y_i - \widehat{Y}_i)^2 = \sum_{i=1}^n \epsilon_i^2\)</span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
An aside on variance
</div>
</div>
<div class="callout-body-container callout-body">
<p>The definition of variance is the sum of the squared differences between values and their mean.</p>
<p>So if I had a variable <span class="math inline">\(S\)</span>, with 100 observations, the mean of <span class="math inline">\(S\)</span>, which we call <span class="math inline">\(\overline{S}\)</span>, would be <span class="math inline">\(\frac{\sum_{i=1}^{100} S_i}{100}\)</span>. The variance of <span class="math inline">\(S\)</span> would be <span class="math inline">\(\sum_{i=1}^{100} (S_i - \overline{S})^2\)</span>.</p>
</div>
</div>
<p>Now, let’s get back to the sum of square errors: <span class="math inline">\(SSE = \sum_{i=1}^n \epsilon_i^2\)</span></p>
<p>The variance of the residuals would be <span class="math inline">\(\sum_{i=1}^n (\epsilon_i - \overline{\epsilon})^2\)</span>. The mean of <span class="math inline">\(\epsilon\)</span>, <span class="math inline">\(\overline\epsilon\)</span>, should be 0 by our assumptions. So the variance of the residuals is <span class="math inline">\(\sum_{i=1}^n \epsilon_i^2\)</span> which is our SSE!</p>
<p>There is some more complicated math that goes into why our variance is divided by n-2 to get the estimated variance of the residuals, but that’s basically it!</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
</div> <!-- /content -->



</body></html>